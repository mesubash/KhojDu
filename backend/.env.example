# ==========================================
# KhojDu Backend Environment Variables
# ==========================================
# Copy this file to .env and fill in your values
# Never commit .env file to version control!
# ==========================================

# ==========================================
# APPLICATION SETTINGS
# ==========================================
APP_NAME=KhojDu
APP_VERSION=1.0.0
BASE_URL=http://localhost:3000
API_BASE_URL=http://localhost:8080/api

# Spring Profile (dev, prod, test)
SPRING_PROFILES_ACTIVE=dev

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
# PostgreSQL Database Settings
DB_HOST=localhost
DB_PORT=5432
DB_NAME=khojdu
DB_USERNAME=postgres
DB_PASSWORD=your_secure_database_password

# Full Database URL (Optional - overrides above settings)
# DATABASE_URL=jdbc:postgresql://localhost:5432/khojdu

# Connection Pool Settings
DB_MAX_POOL_SIZE=20
DB_MIN_IDLE=5

# ==========================================
# JWT TOKEN CONFIGURATION
# ==========================================
# JWT Secret Key (MUST be changed in production!)
# Generate strong key: openssl rand -base64 64
JWT_SECRET=khojdu-super-secret-key-for-jwt-token-generation-2024-change-this-in-production

# Token Expiration Times (in milliseconds)
JWT_EXPIRATION=86400000          # 24 hours (access token)
JWT_REFRESH_EXPIRATION=604800000 # 7 days (refresh token)

# ==========================================
# REDIS CACHE CONFIGURATION
# ==========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=
REDIS_DATABASE=0
REDIS_TIMEOUT=2000

# Redis Connection Pool
REDIS_MAX_ACTIVE=8
REDIS_MAX_IDLE=8
REDIS_MIN_IDLE=0

# ==========================================
# EMAIL SERVICE CONFIGURATION
# ==========================================
# SMTP Settings (Gmail example)
MAIL_HOST=smtp.gmail.com
MAIL_PORT=587
MAIL_USERNAME=your-email@gmail.com
MAIL_PASSWORD=your-gmail-app-password

# Email Settings
EMAIL_FROM=noreply@khojdu.com
EMAIL_FROM_NAME=KhojDu

# For Development: Use Mailtrap
# MAIL_HOST=smtp.mailtrap.io
# MAIL_PORT=2525
# MAIL_USERNAME=your-mailtrap-username
# MAIL_PASSWORD=your-mailtrap-password

# ==========================================
# FILE STORAGE - CLOUDINARY
# ==========================================
# Sign up at: https://cloudinary.com
CLOUDINARY_CLOUD_NAME=your-cloudinary-cloud-name
CLOUDINARY_API_KEY=your-cloudinary-api-key
CLOUDINARY_API_SECRET=your-cloudinary-api-secret

# File Upload Settings
FILE_UPLOAD_DIR=./uploads
MAX_FILE_SIZE=10MB
MAX_REQUEST_SIZE=50MB

# ==========================================
# SECURITY SETTINGS
# ==========================================
# Password Requirements
PASSWORD_MIN_LENGTH=8
PASSWORD_REQUIRE_UPPERCASE=true
PASSWORD_REQUIRE_LOWERCASE=true
PASSWORD_REQUIRE_DIGIT=true
PASSWORD_REQUIRE_SPECIAL_CHAR=false

# Account Security
MAX_LOGIN_ATTEMPTS=5
LOCKOUT_DURATION=300            # 5 minutes in seconds

# ==========================================
# CORS CONFIGURATION
# ==========================================
# Allowed Origins (comma-separated)
CORS_ALLOWED_ORIGINS=http://localhost:3000,http://localhost:3001
CORS_ALLOWED_METHODS=GET,POST,PUT,PATCH,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true
CORS_MAX_AGE=3600

# ==========================================
# PAGINATION SETTINGS
# ==========================================
PAGINATION_DEFAULT_PAGE_SIZE=20
PAGINATION_MAX_PAGE_SIZE=100

# ==========================================
# SEARCH CONFIGURATION
# ==========================================
SEARCH_MAX_RESULTS=1000
SEARCH_DEFAULT_RADIUS_KM=5

# ==========================================
# RATE LIMITING
# ==========================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_REQUESTS_PER_HOUR=1000

# ==========================================
# LOGGING CONFIGURATION
# ==========================================
LOG_LEVEL=INFO                  # DEBUG, INFO, WARN, ERROR
LOG_FILE_PATH=./logs/khojdu-backend.log
LOG_MAX_FILE_SIZE=10MB
LOG_MAX_HISTORY=30              # days

# ==========================================
# MONITORING & HEALTH
# ==========================================
# Actuator Endpoints
ACTUATOR_ENABLED=true
ACTUATOR_BASE_PATH=/actuator
ACTUATOR_EXPOSE_ENDPOINTS=health,info,metrics,prometheus

# Health Check Settings
HEALTH_SHOW_DETAILS=when-authorized

# ==========================================
# BUSINESS LOGIC SETTINGS
# ==========================================
# Property Settings
MAX_PROPERTY_IMAGES=10
REVIEW_MODERATION_ENABLED=true
AUTO_APPROVE_VERIFIED_LANDLORDS=true
FEATURED_PROPERTY_PRICE_NPR=500

# Verification Settings
VERIFICATION_TOKEN_EXPIRY_HOURS=24
PASSWORD_RESET_TOKEN_EXPIRY_HOURS=1

# ==========================================
# THIRD-PARTY API KEYS (Optional)
# ==========================================
# Google Maps API (for location features)
GOOGLE_MAPS_API_KEY=your-google-maps-api-key

# Twilio (for SMS notifications - optional)
TWILIO_ACCOUNT_SID=your-twilio-account-sid
TWILIO_AUTH_TOKEN=your-twilio-auth-token
TWILIO_PHONE_NUMBER=your-twilio-phone-number

# Firebase (for push notifications - optional)
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_PRIVATE_KEY=your-firebase-private-key
FIREBASE_CLIENT_EMAIL=your-firebase-client-email

# ==========================================
# DOCKER SETTINGS (for docker-compose)
# ==========================================
# PostgreSQL Docker
POSTGRES_USER=postgres
POSTGRES_PASSWORD=postgres
POSTGRES_DB=khojdu

# Redis Docker
REDIS_DOCKER_PASSWORD=

# ==========================================
# PRODUCTION SETTINGS (Additional)
# ==========================================
# Use these in production only

# SSL/TLS Settings
SSL_ENABLED=false
SSL_KEY_STORE=classpath:keystore.p12
SSL_KEY_STORE_PASSWORD=your-keystore-password
SSL_KEY_STORE_TYPE=PKCS12
SSL_KEY_ALIAS=khojdu

# Domain Settings
DOMAIN_NAME=khojdu.com
SECURE_COOKIE=true

# Backup Settings
BACKUP_ENABLED=true
BACKUP_SCHEDULE=0 0 2 * * ?     # Daily at 2 AM
BACKUP_RETENTION_DAYS=30

# ==========================================
# DEVELOPMENT SETTINGS
# ==========================================
# Enable these only in development

# Debug Mode
DEBUG_MODE=false
SHOW_SQL=false
FORMAT_SQL=true

# H2 Console (for testing)
H2_CONSOLE_ENABLED=false
H2_CONSOLE_PATH=/h2-console

# ==========================================
# TESTING SETTINGS
# ==========================================
# Test Database
TEST_DB_URL=jdbc:h2:mem:testdb
TEST_DB_USERNAME=sa
TEST_DB_PASSWORD=

# ==========================================
# NOTES & REMINDERS
# ==========================================
# 1. Generate strong JWT_SECRET in production:
#    openssl rand -base64 64
#
# 2. Use environment-specific .env files:
#    .env.dev, .env.prod, .env.test
#
# 3. Never commit .env to version control!
#    Add .env to .gitignore
#
# 4. For Gmail SMTP:
#    - Enable 2FA
#    - Generate App Password
#    - Use App Password in MAIL_PASSWORD
#
# 5. For Cloudinary:
#    - Sign up at cloudinary.com
#    - Get credentials from dashboard
#
# 6. Database passwords should be strong:
#    - At least 16 characters
#    - Mix of uppercase, lowercase, numbers, symbols
#
# 7. Change all default values in production!
#
# ==========================================

# ==========================================
# QUICK START VALUES (Development)
# ==========================================
# Uncomment and use these for quick local setup:

# DB_USERNAME=postgres
# DB_PASSWORD=postgres
# JWT_SECRET=dev-secret-key-change-in-production
# MAIL_HOST=smtp.mailtrap.io
# MAIL_PORT=2525
# CLOUDINARY_CLOUD_NAME=demo-cloud
# REDIS_HOST=localhost

# ==========================================
# END OF CONFIGURATION
# ==========================================